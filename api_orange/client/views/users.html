
<div class="panel panel-default" ng-init="getUsers()">
  <div class="panel-heading">
    <h3 class="panel-title">Latest Users</h3>
  </div>
  <div class="panel-body">
    <div class="row">

      <form name="myForm">
        <div class="col-md-12">
          <label class="col-md-12"> Sélectionner un utilisateur</label><br>
          <div class="col-md-3">
            <select name="singleSelect" ng-model="data" class="form-control ">
              <option ng-repeat="user in users" value="{{user._id}}">{{user.identity.last_name}} {{user.identity.first_name}}</option>
            </select><br>
          </div>
        </div>
        <!-- <tt>singleSelect = {{data}}</tt> -->
      </form>
    </div>
    <div class="row">

    <div class="col-md-8">

      <table class="table table-condensed">
        <thead>
          <tr>
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Phone</th>
            <th>Phone Plan</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="user in users | filter:data">
            <td>{{user.identity.last_name}}</td>
            <td>{{user.identity.first_name}}</td>
            <td>{{user.phone_plan.phone_number}}</td>
            <td>{{user.phone_plan.subscription}}</td>
            <td><a class="btn btn-primary" data-toggle="modal" data-target="#myModal" ng-click="editUser(user)">Edit</a></td>
            <td><a class="btn btn-danger" data-toggle="modal" data-target="#myModalDelete" ng-click="editUser(user)">Delete</a></td>
            <td><a class="btn btn-success" href="#/clients/{{user._id}}">Details</a></td>
          </tr>
        </tbody>
      </table>
    </div>

      <!-- Modal -->
      <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Editer Utilisateur</h4>
            </div>
            <div class="modal-body">

                <form class="form-horizontal">
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="firstName">FirstName</label>
                    <div class="col-sm-10">
                      <input  class="form-control" id="firstName" placeholder="Enter your firstname" ng-model="clickedUser.identity.first_name" name="password">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="lastName">LastName</label>
                    <div class="col-sm-10">
                      <input class="form-control" id="LastName" placeholder="Enter your lastname" ng-model="clickedUser.identity.last_name">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="email">Email:</label>
                    <div class="col-sm-10">
                      <input type="email" class="form-control" id="email" placeholder="Enter email" ng-model="clickedUser.identity.email">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="email">Phone_plan</label>
                    <div class="col-sm-10">
                      <input  class="form-control" id="email" placeholder="Enter email" ng-model="clickedUser.phone_plan.subscription">
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="control-label col-sm-2" for="email">Phone Number:</label>
                    <div class="col-sm-10">
                      <input  class="form-control" id="email" placeholder="Enter email" ng-model="clickedUser.phone_plan.phone_number">
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                      <div class="checkbox">
                        <label><input type="checkbox"> Remember me</label>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                      <button ng-click="updateUser(clickedUser)" class="btn btn-default">Submit</button>
                    </div>
                  </div>
                </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="myModalDelete" role="dialog">
        <div class="modal-dialog">

          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Etes vous sûre ?</h4>
            </div>
            <div class="modal-body">
            <strong style="color: red;">
                Vous allez supprimer l'utilisateur {{clickedUser.identity.first_name}}
            </strong>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" >Close</button>
              <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="deleteUser(clickedUser)">Yes</button>
            </div>
          </div>

        </div>
      </div> <!-- Model -->

    </div>
  </div>
</div>
